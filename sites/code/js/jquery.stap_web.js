//Stap
(function(e){e.fn.stap=function(t,n,r){if(typeof t!=="function"){return this.each(function(){e(this).trigger("stap")})}return this.each(function(){if(isMobile){e(this).data({scr:n,activeClass:r}).addClass("_tap").addClass('_stap').on("stap",t).on("_tap.stap",t).on("click.stap",function(e){this.blur();e.preventDefault();e.stopPropagation()}).data("stap",true)}else{e(this).addClass('_stap').on("stap",t).on("click.stap",t).data("stap",true)}})};e.stap={doc:window.document,tstart:function(t){e.stap.moved=false;e.stap.startTime=t.timeStamp;e.stap.el=e(t.target);if(!e.stap.el.hasClass("_tap")){e.stap.el=e.stap.el.parents("._tap:first")}if(e.stap.el[0]){if(!e.stap.el.data("scr")){t.preventDefault();t.stopPropagation();e.stap.el.trigger("_tap")}else{e.stap.startX=t.touches[0].clientX;e.stap.startY=t.touches[0].clientY;e.stap.el[0].addEventListener("touchmove",e.stap.tmove,false);e.stap.doc.addEventListener("touchend",e.stap.tend,false);e.stap.ac=e.stap.el.data("activeClass")||"active";e.stap.el.addClass(e.stap.ac)}}else{}},tmove:function(t){if(!e.stap.moved&&(t.touches[0].clientX!=e.stap.startX||t.touches[0].clientY!=e.stap.startY)){e.stap.el.removeClass(e.stap.ac);e.stap.moved=true}e.stap.lastmove=t.timeStamp},tend:function(t){if(e.stap.el[0])e.stap.el[0].removeEventListener("touchmove",e.stap.tmove,false);e.stap.doc.removeEventListener("touchend",e.stap.tend,false);if(!e.stap.moved){e.stap.el.removeClass(e.stap.ac);e.stap.el.trigger("_tap");e.stap.preventGhostClick(e.stap.startX,e.stap.startY)}else{}},enable:function(){if(isMobile){e.stap.doc.addEventListener("touchstart",e.stap.tstart,false);e.stap.doc.addEventListener("click",e.stap.ghostClickHandler,true)}},preventGhostClick:function(t,n){e.stap.coords.push(t,n);window.setTimeout(function(){e.stap.coords.splice(0,2)},1e3)},ghostClickHandler:function(t){for(var n=0,r=e.stap.coords.length;n<r;n+=2){var i=e.stap.coords[n];var s=e.stap.coords[n+1];if(Math.abs(t.clientX-i)<1e3&&Math.abs(t.clientY-s)<1e3){t.stopPropagation();t.preventDefault()}}},coords:[]};e.stap.enable()})(jQuery);